[gd_scene load_steps=10 format=4 uid="uid://bb8xchi76xpxd"]

[ext_resource type="PackedScene" uid="uid://bd72ohs7x3fys" path="res://Scenes/tilemap.tscn" id="1_m3ha0"]
[ext_resource type="Script" uid="uid://ct55chxbho0yk" path="res://Scripts/level.gd" id="1_xosfc"]
[ext_resource type="PackedScene" uid="uid://0t3tdgnb5mjo" path="res://Levels/Level1/monsterSpawner.tscn" id="6_k313m"]
[ext_resource type="PackedScene" uid="uid://cywp0vhrkjqsx" path="res://Scenes/door.tscn" id="6_xosfc"]
[ext_resource type="Script" uid="uid://kgd2ux45ohr0" path="res://Scripts/door.gd" id="10_mbuxx"]
[ext_resource type="PackedScene" uid="uid://c4wws2xdfldn2" path="res://Scenes/chest.tscn" id="10_x7rwe"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_xosfc"]
vertices = PackedVector2Array(-123.57031, 116.5, -124.42969, 36.5, 15.5, 36.5, 157.5, 116.5, 157.5, -96.5, 157.5, 8.5, 17.5, 8.5, -124.5, -96.5, 17.5, 36.5, 157.5, 36.5, 15.5, 8.5, -124.5, 8.5)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 5, 6, 7), PackedInt32Array(8, 9, 3), PackedInt32Array(8, 3, 2), PackedInt32Array(6, 8, 2, 10), PackedInt32Array(7, 6, 10), PackedInt32Array(7, 10, 11)])
outlines = Array[PackedVector2Array]([PackedVector2Array(93, -103, 164, -103, 164, 15, 24, 15, 24, 30, 164, 30, 164, 123, -130, 123, -131, 30, 9, 30, 9, 15, -131, 15, -131, -103, -60, -103, -51, -103, 84, -103)])
agent_radius = 6.5

[sub_resource type="SpriteFrames" id="SpriteFrames_ghn66"]
animations = [{
"frames": [],
"loop": true,
"name": &"open",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dl8mf"]
size = Vector2(9, 28)

[node name="Main" type="Node2D" node_paths=PackedStringArray("doors") groups=["East", "North", "South", "West"]]
texture_filter = 1
script = ExtResource("1_xosfc")
level = 2
doors = [NodePath("Door"), NodePath("Door3"), NodePath("Door2"), NodePath("SideDoor"), NodePath("SideDoor2")]

[node name="Y_Sorting" type="Node2D" parent="."]
z_index = 1
y_sort_enabled = true

[node name="Door" parent="." instance=ExtResource("6_xosfc")]
position = Vector2(-96, -117)
toTransport = 3
playerPos = Vector2(0, 54)
enemyControlled = false
direction = "north"

[node name="Door3" parent="." instance=ExtResource("6_xosfc")]
position = Vector2(17, 123)
toTransport = 3
playerPos = Vector2(0, 54)
enemyControlled = false
direction = "south"

[node name="Door2" parent="." instance=ExtResource("6_xosfc")]
position = Vector2(128, -117)
toTransport = 9
playerPos = Vector2(0, 55)
enemyControlled = false
direction = "north"

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.69135684, 0.6913568, 0.69135684, 1)

[node name="Control" type="Control" parent="."]
clip_contents = true
layout_mode = 3
anchors_preset = 0
offset_left = -140.0
offset_top = -141.0
offset_right = 173.0
offset_bottom = 137.0

[node name="Floor" parent="Control" instance=ExtResource("1_m3ha0")]
z_index = -2
position = Vector2(140, 141)
tile_map_data = PackedByteArray("AAD6//7/AAABAAYAAAD7//7/AAALABYAAAD8//7/AAABAAYAAAD9//7/AAABAAYAAAD+//7/AAABAAYAAAD///7/AAABAAYAAAAAAP7/AAABAAYAAAABAP7/AAABAAYAAAACAP7/AAABAAYAAAADAP7/AAABAAYAAAAEAP7/AAABAAYAAAAFAP7/AAABAAYAAAAGAP7/AAABAAYAAAAGAP//AAALABYAAAAFAP//AAABAAYAAAAEAP//AAABAAYAAAADAP//AAAMABYAAAACAP//AAABAAYAAAABAP//AAABAAYAAAAAAP//AAAMABUAAAD/////AAAMABYAAAD+////AAABAAYAAAD9////AAABAAYAAAD8////AAABAAYAAAD7////AAAMABUAAAD6////AAABAAYAAAD6/wAAAAABAAcAAAD7/wAAAAABAAcAAAD8/wAAAAABAAcAAAD9/wAAAAABAAcAAAD+/wAAAAABAAcAAAD//wAAAAABAAcAAAAAAAAAAAABAAcAAAABAAAAAAABAAcAAAACAAAAAAABAAcAAAADAAAAAAABAAcAAAAEAAAAAAABAAcAAAAFAAAAAAABAAcAAAAGAAAAAAABAAcAAAAHAP7/AAABAAYAAAAHAP//AAAMABUAAAAHAAAAAAABAAcAAAAIAAAAAAABAAcAAAAJAAAAAAABAAcAAAAKAAAAAAABAAcAAAAKAP//AAABAAYAAAAKAP7/AAABAAYAAAAKAP3/AAABAAYAAAAKAPz/AAABAAYAAAAKAPv/AAABAAYAAAAKAPr/AAABAAYAAAAKAPn/AAABAAYAAAAJAPn/AAABAAYAAAAIAPn/AAABAAYAAAAIAPr/AAALABYAAAAIAPv/AAABAAYAAAAIAPz/AAABAAYAAAAIAP3/AAABAAYAAAAIAP7/AAABAAYAAAAIAP//AAALABUAAAAJAP//AAABAAYAAAAJAPv/AAALABYAAAAJAPr/AAABAAYAAAAJAPz/AAABAAYAAAAJAP3/AAABAAYAAAAJAP7/AAABAAYAAAD5/wAAAAABAAcAAAD5////AAABAAYAAAD5//7/AAABAAYAAAD5//3/AAABAAYAAAD5//z/AAABAAYAAAD5//v/AAALABUAAAD5//r/AAABAAYAAAD5//n/AAABAAYAAAD4//n/AAABAAYAAAD3//n/AAABAAYAAAD3//r/AAABAAYAAAD3//v/AAABAAYAAAD3//z/AAABAAYAAAD3//3/AAABAAYAAAD3//7/AAABAAYAAAD3////AAABAAYAAAD3/wAAAAABAAcAAAD4/wAAAAABAAcAAAD4////AAALABUAAAD4//7/AAABAAYAAAD4//3/AAALABYAAAD4//z/AAABAAYAAAD4//v/AAABAAYAAAD4//r/AAABAAYAAAD+/wEAAAABAAoAAAD//wEAAAABAAoAAAAAAAEAAAABAAoAAAABAAEAAAABAAoAAAACAAEAAAABAAoAAAADAAEAAAABAAoAAAAEAAEAAAABAAoAAAAFAAEAAAABAAoAAAAGAAEAAAABAAoAAAAHAAEAAAABAAoAAAAIAAEAAAABAAoAAAAJAAEAAAABAAoAAAAKAAEAAAACAAoAAAAKAAIAAAACAAoAAAAJAAIAAAABAAoAAAAIAAIAAAABAAoAAAAHAAIAAAABAAoAAAAGAAIAAAABAAoAAAAFAAIAAAAAABUAAAAEAAIAAAABAAoAAAADAAIAAAABAAoAAAACAAIAAAABAAoAAAABAAIAAAABAAoAAAAAAAIAAAABAAoAAAD//wIAAAAAABYAAAD+/wIAAAAAABUAAAD9/wIAAAABAAoAAAD8/wIAAAAAABUAAAD7/wIAAAABAAoAAAD6/wIAAAABAAoAAAD5/wIAAAABAAoAAAD4/wIAAAABAAoAAAD3/wIAAAAAAAoAAAD3/wEAAAAAAAoAAAD4/wEAAAABAAoAAAD5/wEAAAABAAoAAAD6/wEAAAABAAoAAAD7/wEAAAABAAoAAAD8/wEAAAABAAoAAAD9/wEAAAABAAoAAAD3/wMAAAAAAAoAAAD4/wMAAAABAAoAAAD5/wMAAAABAAoAAAD6/wMAAAABAAoAAAD7/wMAAAABAAoAAAD8/wMAAAABAAoAAAD9/wMAAAAAABYAAAD+/wMAAAAAABYAAAD//wMAAAAAABUAAAAAAAMAAAABABYAAAABAAMAAAABABUAAAACAAMAAAABAAoAAAADAAMAAAAAABYAAAAEAAMAAAABAAoAAAAFAAMAAAAAABYAAAAGAAMAAAABAAoAAAAHAAMAAAABAAoAAAAIAAMAAAABAAoAAAAJAAMAAAABAAoAAAAKAAMAAAACAAoAAAAKAAQAAAACAAoAAAAJAAQAAAAAABYAAAAIAAQAAAABAAoAAAAHAAQAAAABAAoAAAAGAAQAAAABAAoAAAAFAAQAAAABAAoAAAAEAAQAAAAAABYAAAADAAQAAAABAAoAAAACAAQAAAABABUAAAABAAQAAAABABYAAAAAAAQAAAABAAoAAAD//wQAAAABABYAAAD+/wQAAAABABUAAAD9/wQAAAABAAoAAAD8/wQAAAAAABYAAAD7/wQAAAABABYAAAD6/wQAAAAAABUAAAD5/wQAAAABAAoAAAD4/wQAAAABAAoAAAD3/wQAAAAAAAoAAAD3/wUAAAAAAAoAAAD4/wUAAAABABYAAAD5/wUAAAABAAoAAAD6/wUAAAABAAoAAAD7/wUAAAABAAoAAAD8/wUAAAABAAoAAAD9/wUAAAABAAoAAAD+/wUAAAABAAoAAAD//wUAAAABAAoAAAAAAAUAAAABABYAAAABAAUAAAABAAoAAAACAAUAAAABABYAAAADAAUAAAABABYAAAAEAAUAAAABAAoAAAAFAAUAAAABAAoAAAAGAAUAAAABAAoAAAAHAAUAAAAAABYAAAAIAAUAAAABAAoAAAAJAAUAAAABABUAAAAKAAUAAAACAAoAAAAHAP3/AAABAAYAAAAGAP3/AAABAAYAAAAFAP3/AAABAAYAAAAEAP3/AAABAAYAAAADAP3/AAABAAYAAAACAP3/AAABAAYAAAABAP3/AAABAAYAAAAAAP3/AAABAAYAAAD///3/AAABAAYAAAD+//3/AAABAAYAAAD9//3/AAABAAYAAAD8//3/AAABAAYAAAD7//3/AAABAAYAAAD6//3/AAALABYAAAD6//z/AAABAAYAAAD7//z/AAALABYAAAD8//z/AAABAAYAAAAGAPz/AAAMABUAAAAHAPz/AAALABUAAAAHAPv/AAAMABUAAAAHAPr/AAAMABYAAAAHAPn/AAABAAYAAAAGAPn/AAABAAYAAAAGAPr/AAABAAYAAAAGAPv/AAABAAYAAAD7//v/AAABAAYAAAD7//r/AAABAAYAAAD7//n/AAABAAYAAAD8//n/AAABAAYAAAD8//r/AAABAAYAAAD8//v/AAABAAYAAAD6//r/AAAMABUAAAD6//n/AAABAAYAAAD6//v/AAALABUAAAAFAPv/AAABAAYAAAAFAPr/AAABAAYAAAAFAPn/AAABAAYAAAD4/wYAAAABABUAAAD4/wcAAAABAAoAAAD5/wcAAAABAAoAAAD6/wcAAAABAAoAAAD7/wcAAAABABUAAAD8/wcAAAABAAoAAAD9/wcAAAABAAoAAAD+/wcAAAABABUAAAD//wcAAAABAAoAAAAAAAcAAAABAAoAAAABAAcAAAABAAoAAAACAAcAAAABABYAAAADAAcAAAABAAoAAAAEAAcAAAABAAoAAAAFAAcAAAABABYAAAAGAAcAAAABAAoAAAAHAAcAAAABAAoAAAAIAAcAAAABAAoAAAAJAAcAAAABAAoAAAAJAAYAAAAAABYAAAD5/wYAAAABAAoAAAD6/wYAAAABABUAAAD7/wYAAAABAAoAAAD8/wYAAAAAABYAAAD9/wYAAAABAAoAAAD+/wYAAAABAAoAAAD//wYAAAABAAoAAAAAAAYAAAABAAoAAAABAAYAAAABABYAAAACAAYAAAABABUAAAADAAYAAAABAAoAAAAEAAYAAAABAAoAAAAFAAYAAAABAAoAAAAGAAYAAAABAAoAAAAHAAYAAAABAAoAAAAIAAYAAAABABYAAAAKAAYAAAACAAoAAAAKAAcAAAACAAoAAAD3/wcAAAAAAAoAAAD3/wYAAAAAAAoAAAD3/wgAAAAAAAsAAAD4/wgAAAABAAsAAAD5/wgAAAABAAsAAAD6/wgAAAABAAsAAAD7/wgAAAABAAsAAAD8/wgAAAABAAsAAAD9/wgAAAABAAsAAAD+/wgAAAABAAsAAAD//wgAAAABAAsAAAAAAAgAAAABAAoAAAAEAAgAAAABAAsAAAAFAAgAAAABAAsAAAAGAAgAAAABAAsAAAAHAAgAAAABAAsAAAAIAAgAAAABAAsAAAAJAAgAAAABAAsAAAAKAAgAAAACAAsAAAABAAgAAAABAAoAAAACAAgAAAABAAsAAAADAAgAAAABAAsAAAAFAPz/AAABAAYAAAAEAPz/AAALABUAAAADAPz/AAALABUAAAACAPz/AAABAAYAAAABAPz/AAABAAYAAAAAAPz/AAALABUAAAD///z/AAABAAYAAAD+//z/AAABAAYAAAD9//z/AAABAAYAAAD9//v/AAABAAYAAAD+//v/AAALABUAAAD///v/AAABAAYAAAAAAPv/AAABAAYAAAABAPv/AAABAAYAAAACAPv/AAAMABUAAAADAPv/AAABAAYAAAAEAPv/AAABAAYAAAAEAPr/AAAMABUAAAADAPr/AAABAAYAAAACAPr/AAAMABYAAAABAPr/AAABAAYAAAAAAPr/AAABAAYAAAD///r/AAABAAYAAAD+//r/AAABAAYAAAD9//r/AAABAAYAAAD9//n/AAABAAYAAAD+//n/AAABAAYAAAD///n/AAABAAYAAAAAAPn/AAABAAYAAAABAPn/AAABAAYAAAACAPn/AAABAAYAAAADAPn/AAABAAYAAAAEAPn/AAABAAYAAAD5//j/AAABAAYAAAD6//j/AAABAAYAAAAHAPj/AAABAAYAAAAIAPj/AAABAAYAAAA=")

[node name="BackWalls2" parent="Control" instance=ExtResource("1_m3ha0")]
z_index = -1
position = Vector2(140, 141)
tile_map_data = PackedByteArray("AAD+/wEAAAAHAAUAAAD9/wEAAAAHAAUAAAD8/wEAAAAHAAUAAAD7/wEAAAAHAAUAAAD6/wEAAAAHAAUAAAD5/wEAAAAHAAUAAAD4/wEAAAAHAAUAAAABAAEAAAAMAAgAAAACAAEAAAAHAAUAAAADAAEAAAAHAAUAAAAEAAEAAAAHAAUAAAAFAAEAAAAHAAUAAAAGAAEAAAAHAAUAAAAHAAEAAAAHAAUAAAAIAAEAAAAHAAUAAAAJAAEAAAAHAAUAAAD4//f/AAABAA8AAAD4//j/AAABABAAAAD7//f/AAABAA8AAAD7//j/AAABABAAAAD4//n/AAABABEAAAD7//n/AAABABEAAAD5//f/AAADABIAAAD6//f/AAAEABIAAAAJAPf/AAABAA8AAAAJAPj/AAABABAAAAAJAPn/AAABABEAAAAGAPf/AAABAA8AAAAGAPj/AAABABAAAAAGAPn/AAABABEAAAAHAPf/AAABAA8AAAAIAPf/AAABAA8AAAD3/wEAAAAMAAMAAAAAAAEAAAALAAgAAAD//wEAAAAHAAUAAAAKAAEAAAAHAAUAAAD9//f/AAABAA8AAAD9//j/AAABABAAAAD9//n/AAABABEAAAD+//f/AAABAA8AAAD+//j/AAABABAAAAD+//n/AAABABEAAAD///f/AAABAA8AAAD///j/AAABABAAAAD///n/AAABABEAAAAAAPf/AAABAA8AAAAAAPj/AAABABAAAAAAAPn/AAABABEAAAABAPf/AAABAA8AAAABAPj/AAABABAAAAABAPn/AAABABEAAAACAPf/AAABAA8AAAACAPj/AAABABAAAAACAPn/AAABABEAAAADAPf/AAABAA8AAAADAPj/AAABABAAAAADAPn/AAABABEAAAAEAPf/AAABAA8AAAAEAPj/AAABABAAAAAEAPn/AAABABEAAAD3//f/AAABAA8AAAD3//j/AAABABAAAAD3//n/AAABABEAAAD8//f/AAABAA8AAAD8//j/AAABABAAAAD8//n/AAABABEAAAAFAPf/AAABAA8AAAAFAPj/AAABABAAAAAFAPn/AAABABEAAAAKAPf/AAABAA8AAAAKAPj/AAABABAAAAAKAPn/AAABABEAAAA=")

[node name="Chest" parent="." instance=ExtResource("10_x7rwe")]
position = Vector2(16, -98)

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_xosfc")

[node name="SideDoor" type="AnimatedSprite2D" parent="." groups=["Door"]]
texture_filter = 1
position = Vector2(172, -44)
sprite_frames = SubResource("SpriteFrames_ghn66")
animation = &"open"
script = ExtResource("10_mbuxx")
toTransport = 3
playerPos = Vector2(0, 54)
direction = "east"

[node name="Area2D" type="Area2D" parent="SideDoor"]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="SideDoor/Area2D"]
position = Vector2(3.5, 4)
shape = SubResource("RectangleShape2D_dl8mf")

[node name="ColorRect2" type="ColorRect" parent="SideDoor"]
offset_left = -1.0
offset_top = -22.0
offset_right = 8.0
offset_bottom = 18.0
color = Color(0.61339027, 0.61339027, 0.61339027, 1)

[node name="SideDoor2" type="AnimatedSprite2D" parent="." groups=["Door"]]
texture_filter = 1
position = Vector2(-148, -42)
sprite_frames = SubResource("SpriteFrames_ghn66")
animation = &"open"
script = ExtResource("10_mbuxx")
toTransport = 3
playerPos = Vector2(0, 54)
direction = "west"

[node name="Area2D" type="Area2D" parent="SideDoor2"]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="SideDoor2/Area2D"]
position = Vector2(3.5, 4)
shape = SubResource("RectangleShape2D_dl8mf")

[node name="ColorRect2" type="ColorRect" parent="SideDoor2"]
offset_left = -1.0
offset_top = -22.0
offset_right = 8.0
offset_bottom = 18.0
color = Color(0.61339027, 0.61339027, 0.61339027, 1)

[node name="Area2D" type="Area2D" parent="."]
visible = false
collision_layer = 8
collision_mask = 8

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Area2D"]
polygon = PackedVector2Array(-139, 136, 172, 136, 172, -101, -139, -102)

[node name="player" type="Area2D" parent="."]
visible = false
collision_layer = 0
collision_mask = 2

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="player"]
polygon = PackedVector2Array(-139, 136, 172, 136, 172, -101, -139, -102)

[node name="MonsterSpawner" parent="." instance=ExtResource("6_k313m")]
position = Vector2(-103, -64)

[node name="MonsterSpawner2" parent="." instance=ExtResource("6_k313m")]
position = Vector2(106, -54)

[node name="MonsterSpawner3" parent="." instance=ExtResource("6_k313m")]
position = Vector2(11, -22)
strength = 1

[connection signal="area_entered" from="SideDoor/Area2D" to="SideDoor" method="_on_area_2d_area_entered"]
[connection signal="area_entered" from="SideDoor2/Area2D" to="SideDoor2" method="_on_area_2d_area_entered"]
[connection signal="area_entered" from="Area2D" to="." method="_on_area_2d_area_entered"]
[connection signal="area_entered" from="player" to="." method="_on_player_area_entered"]
[connection signal="area_exited" from="player" to="." method="_on_player_area_exited"]
